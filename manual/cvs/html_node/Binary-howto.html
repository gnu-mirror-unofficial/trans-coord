<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>CVS&mdash;Concurrent Versions System v1.11.23: Binary howto</title>

<meta name="description" content="CVS&mdash;Concurrent Versions System v1.11.23: Binary howto">
<meta name="keywords" content="CVS&mdash;Concurrent Versions System v1.11.23: Binary howto">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Binary-files.html#Binary-files" rel="up" title="Binary files">
<link href="Multiple-developers.html#Multiple-developers" rel="next" title="Multiple developers">
<link href="Binary-why.html#Binary-why" rel="prev" title="Binary why">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/software/gnulib/manual.css">


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Binary-howto"></a>
<div class="header">
<p>
Previous: <a href="Binary-why.html#Binary-why" accesskey="p" rel="prev">Binary why</a>, Up: <a href="Binary-files.html#Binary-files" accesskey="u" rel="up">Binary files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="How-to-store-binary-files"></a>
<h3 class="section">9.2 How to store binary files</h3>

<p>There are two issues with using <small>CVS</small> to store
binary files.  The first is that <small>CVS</small> by default
converts line endings between the canonical form in
which they are stored in the repository (linefeed
only), and the form appropriate to the operating system
in use on the client (for example, carriage return
followed by line feed for Windows NT).
</p>
<p>The second is that a binary file might happen to
contain data which looks like a keyword (see <a href="Keyword-substitution.html#Keyword-substitution">Keyword substitution</a>), so keyword expansion must be turned
off.
</p>

<p>The &lsquo;<samp>-kb</samp>&rsquo; option available with some <small>CVS</small>
commands insures that neither line ending conversion
nor keyword expansion will be done.
</p>
<p>Here is an example of how you can create a new file
using the &lsquo;<samp>-kb</samp>&rsquo; flag:
</p>
<div class="example">
<pre class="example">$ echo '$<i></i>Id$' &gt; kotest
$ cvs add -kb -m&quot;A test file&quot; kotest
$ cvs ci -m&quot;First checkin; contains a keyword&quot; kotest
</pre></div>

<p>If a file accidentally gets added without &lsquo;<samp>-kb</samp>&rsquo;,
one can use the <code>cvs admin</code> command to recover.
For example:
</p>
<div class="example">
<pre class="example">$ echo '$<i></i>Id$' &gt; kotest
$ cvs add -m&quot;A test file&quot; kotest
$ cvs ci -m&quot;First checkin; contains a keyword&quot; kotest
$ cvs admin -kb kotest
$ cvs update -A kotest
# <span class="roman">For non-unix systems:</span>
# <span class="roman">Copy in a good copy of the file from outside CVS</span>
$ cvs commit -m &quot;make it binary&quot; kotest
</pre></div>

<p>When you check in the file <samp>kotest</samp> the file is
not preserved as a binary file, because you did not
check it in as a binary file.  The <code>cvs
admin -kb</code> command sets the default keyword
substitution method for this file, but it does not
alter the working copy of the file that you have.  If you need to
cope with line endings (that is, you are using
<small>CVS</small> on a non-unix system), then you need to
check in a new copy of the file, as shown by the
<code>cvs commit</code> command above.
On unix, the <code>cvs update -A</code> command suffices.
(Note that you can use <code>cvs log</code> to determine the default keyword
substitution method for a file and <code>cvs status</code> to determine
the keyword substitution method for a working copy.)
</p>
<p>However, in using <code>cvs admin -k</code> to change the
keyword expansion, be aware that the keyword expansion
mode is not version controlled.  This means that, for
example, that if you have a text file in old releases,
and a binary file with the same name in new releases,
<small>CVS</small> provides no way to check out the file in text
or binary mode depending on what version you are
checking out.  There is no good workaround for this
problem.
</p>
<p>You can also set a default for whether <code>cvs add</code>
and <code>cvs import</code> treat a file as binary based on
its name; for example you could say that files who
names end in &lsquo;<samp>.exe</samp>&rsquo; are binary.  See <a href="Wrappers.html#Wrappers">Wrappers</a>.
There is currently no way to have <small>CVS</small> detect
whether a file is binary based on its contents.  The
main difficulty with designing such a feature is that
it is not clear how to distinguish between binary and
non-binary files, and the rules to apply would vary
considerably with the operating system.
</p>
<hr>
<div class="header">
<p>
Previous: <a href="Binary-why.html#Binary-why" accesskey="p" rel="prev">Binary why</a>, Up: <a href="Binary-files.html#Binary-files" accesskey="u" rel="up">Binary files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
