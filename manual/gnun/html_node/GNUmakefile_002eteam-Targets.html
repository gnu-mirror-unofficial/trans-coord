<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- 
This manual (updated 3 December 2012) is for GNUnited Nations (version
0.6), a suite for maintaining translations of www.gnu.org
essays and other articles.


Copyright (C) 2008, 2009, 2010, 2011, 2012 Free Software
Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License." -->
<!-- Created by GNU Texinfo 4.13.90, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GNUnited Nations: GNUmakefile.team Targets</title>

<meta name="description" content="GNUnited Nations: GNUmakefile.team Targets">
<meta name="keywords" content="GNUnited Nations: GNUmakefile.team Targets">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="PO-Files-and-Team.html#PO-Files-and-Team" rel="up" title="PO Files and Team">
<link href="GNUmakefile_002eteam-and-Cron.html#GNUmakefile_002eteam-and-Cron" rel="next" title="GNUmakefile.team and Cron">
<link href="GNUmakefile_002eteam-Variables.html#GNUmakefile_002eteam-Variables" rel="previous" title="GNUmakefile.team Variables">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="GNUmakefile_002eteam-Targets"></a>
<div class="header">
<p>
Next: <a href="GNUmakefile_002eteam-and-Cron.html#GNUmakefile_002eteam-and-Cron" accesskey="n" rel="next">GNUmakefile.team and Cron</a>, Previous: <a href="GNUmakefile_002eteam-Variables.html#GNUmakefile_002eteam-Variables" accesskey="p" rel="previous">GNUmakefile.team Variables</a>, Up: <a href="PO-Files-and-Team.html#PO-Files-and-Team" accesskey="u" rel="up">PO Files and Team</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Targets-in-GNUmakefile_002eteam"></a>
<h4 class="subsubsection">2.3.7.2 Targets in <samp>GNUmakefile.team</samp></h4>

<dl compact="compact">
<dt><code>update</code></dt>
<dd><p>Updates the repositories.  Does nothing unless <code>VCS=yes</code>.
</p>
</dd>
<dt><code>sync</code></dt>
<dd><p>Merges all available PO files from the corresponding POT in <em>www</em>.
If a POT is missing in the master repository (usually, because it was
deleted when the original article was either split, renamed or deleted),
a warning is printed for the corresponding file and no merging occurs
for it.
</p>
</dd>
<dt><code>report</code></dt>
<dd><p>Verifies which translations are complete, and prints a list (with
statistics) of those that need to be updated.
</p>
</dd>
<dt><code>format</code></dt>
<dd><p>A convenience rule to re-wrap all files upto the standard length.  Most
PO editors leave the <code>msgstr</code> as a single long line after it has
been edited, but GNUN will automatically re-wrap the file to the standard
line length when it is processed.  Wrapping long lines in PO files is a
good practice as it avoids unnecessary revisions.
</p>
<p>This rule checks for all translations that have lines longer than 80,
and runs <code>msgcat</code> accordingly to reformat them.  For that
reason, it is recommended that you wrap all long lines in the comment
fields (e.g. the file header, including the copyright statement, and any
other comments for specific messages), because <code>make format</code> will
unnecessarily invoke <code>msgcat</code> for any file that has a longer
line, wherever it may occur.
</p>
</dd>
<dt><code>publish</code></dt>
<dd><p>The <code>publish</code> rule&rsquo;s task is to copy all modified files to the
official <em>www</em> repository.  It depends on the <code>format</code> target
to ensure that all files are re-wrapped to the standard line length
limit, but deliberately does not depend on <code>sync VCS=yes</code>.
Usually, one would run <code>make publish</code> when one or a bunch of PO
files are in a satisfactory condition to be published, and this rule is
just a convenience to avoid multiple manual <code>cp</code> invocations.
As a rule of thumb, before running this rule it is sane to run
<code>sync</code> and correct any <em>fuzzy</em> messages and other problems, if
necessary.
</p>
<p>The <code>publish</code> rule does not depend on <code>sync</code> explicitly,
because that would be a nuisance for offline operations and basically
unnecessary when the committer is fairly confident that there are no
changes to (re-)merge.  A hard dependency on <code>sync</code> would slow down
the operation considerably.
</p>
<p>As usual, when committing to the official repository, it is always a
good practice to examine the output of <code>cvs diff</code>.
</p>
<p>Invoking <code>make publish</code> prints warnings and does not actually copy
the affected file if the sub-directory in &ldquo;www&rdquo; is non-existent or the
corresponding <samp>.pot</samp> is missing.
</p>
<p>Typically, after an editing session (whether it involves actual editing
or just merging contributions from team members), one would do:
</p>
<div class="example">
<pre class="example">$ make sync VCS=yes
$ make publish
$ cd <var>wwwdir</var>
$ cvs up
(Add all new translations, if any.)
  $ cvs add <var>file</var> &hellip;
$ cvs diff
$ cvs commit -m &quot;Some descriptive message.&quot;
</pre></div>

</dd>
<dt><code>clean</code></dt>
<dd><p>Deletes all backup and auto-generated files that some PO editors leave
behind, namely&mdash;<samp><var>file</var>.po~</samp>, <samp><var>file</var>.po.bak</samp> and
<samp><var>file</var>.mo</samp>.
</p></dd>
</dl>

<p><code>make VCS=yes</code> is the recommended command to be run periodically.
To check the status of the translations, run <code>make report</code>.
</p>
<p>Feel free to replace all strings with equivalents in your native
language and of course&mdash;do not hesitate to extend this file and modify
it as much as you like.  For example, useful extra functionality would
be a target that will check which files have not yet been committed in
the official repository, or which files have to be updated there
(i.e. they were updated by the team members but not installed by the
coordinator).  Either way, if you come up with something interesting, it
would be nice to send a message to <a href="mailto:bug-gnun@gnu.org">bug-gnun@gnu.org</a>, so that
<samp>GNUmakefile.team</samp> gets updated for all teams&rsquo; benefit.
</p>
<hr>
<div class="header">
<p>
Next: <a href="GNUmakefile_002eteam-and-Cron.html#GNUmakefile_002eteam-and-Cron" accesskey="n" rel="next">GNUmakefile.team and Cron</a>, Previous: <a href="GNUmakefile_002eteam-Variables.html#GNUmakefile_002eteam-Variables" accesskey="p" rel="previous">GNUmakefile.team Variables</a>, Up: <a href="PO-Files-and-Team.html#PO-Files-and-Team" accesskey="u" rel="up">PO Files and Team</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
